<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Climatic Environments - Syllabus</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Climatic Environments</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" rel="" target="" aria-current="page">
 <span class="menu-text">Syllabus</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/sknox01" rel="" target=""><i class="bi bi-github" role="img" aria-label="Quarto GitHub">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./index.html">Syllabus</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Syllabus</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#your-instructor" id="toc-your-instructor" class="nav-link active" data-scroll-target="#your-instructor">Your Instructor</a></li>
  <li><a href="#instructional-methods" id="toc-instructional-methods" class="nav-link" data-scroll-target="#instructional-methods">Instructional methods</a></li>
  <li><a href="#communication-guidelines" id="toc-communication-guidelines" class="nav-link" data-scroll-target="#communication-guidelines">Communication Guidelines</a>
  <ul class="collapse">
  <li><a href="#announcements" id="toc-announcements" class="nav-link" data-scroll-target="#announcements">Announcements</a></li>
  <li><a href="#email" id="toc-email" class="nav-link" data-scroll-target="#email">Email</a></li>
  <li><a href="#course-logistics-q-a-forum" id="toc-course-logistics-q-a-forum" class="nav-link" data-scroll-target="#course-logistics-q-a-forum">Course Logistics Q &amp; A Forum</a></li>
  <li><a href="#other-discussion-forums" id="toc-other-discussion-forums" class="nav-link" data-scroll-target="#other-discussion-forums">Other Discussion Forums</a></li>
  </ul></li>
  <li><a href="#required-course-materials" id="toc-required-course-materials" class="nav-link" data-scroll-target="#required-course-materials">Required course materials</a></li>
  <li><a href="#course-content" id="toc-course-content" class="nav-link" data-scroll-target="#course-content">Course content</a></li>
  <li><a href="#evaluation" id="toc-evaluation" class="nav-link" data-scroll-target="#evaluation">Evaluation</a></li>
  <li><a href="#academic-integrity" id="toc-academic-integrity" class="nav-link" data-scroll-target="#academic-integrity">Academic integrity</a></li>
  <li><a href="#other-statements" id="toc-other-statements" class="nav-link" data-scroll-target="#other-statements">Other statements</a></li>
  <li><a href="#strategies-for-success" id="toc-strategies-for-success" class="nav-link" data-scroll-target="#strategies-for-success">Strategies for Success</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Syllabus</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div class="columns">
<div class="column" style="width:65%;">
<p><strong>GEOG 321</strong>: Winter 2024</p>
<p>with Dr.&nbsp;Sara Knox</p>
<p>How do feedbacks between ecosystems and the atmosphere influence microclimates and the global climate system? In this course we’ll focus on the interactions between the surface, vegetation and atmosphere, and the physical processes governing the transfer of heat, mass and momentum. Through this course you’ll also be exposed to the basic instrumentation and methods used in today’s monitoring and modeling of microscale climate and surface-atmosphere exchange. While this course examines the behaviour of the atmosphere close to the surface, what we cover in this class implications for processes occurring at the scale of a single leaf to the entire planet!</p>
<section id="learning-outcomes" class="level1">
<h1>Learning Outcomes</h1>
<p>By the end of the course you should be able to:</p>
<ul>
<li>explain how the surface radiation and energy budget affects the surface climate.</li>
<li>describe important surface characteristics that affect surface radiation and energy budgets and surface microclimates.</li>
<li>understand the basics of turbulence, dispersion and local wind systems in the atmospheric boundary layer and how they are controlled by surface processes.</li>
<li>provide examples of key physical, biological and chemical processes that control trace gas, water and energy fluxes between the land surface and the atmosphere,</li>
<li>provide examples of how surface-atmosphere interactions respond to environmental change, and how this can create climate feedbacks.</li>
<li>know the principles of basic instrumentation, methods and data-analysis (including the use of the R programming language) used for today’s monitoring and modelling of weather and climate in the atmospheric boundary layer.</li>
<li>analyze and interpret data from measurement systems that are used to monitor near-surface climate and surface radiation, energy, and greenhouse gas balances.</li>
<li>explain how the principles of micrometeorology have practical application to society.</li>
</ul>
</section>
</div><div class="column" style="width:5%;">

</div><div class="column" style="width:30%;">
<p><img src="images/RBM.jpeg" class="img-fluid"></p>
<p><img src="images/bbs-tower.jpg" class="img-fluid"></p>
</div>
</div>
<section id="your-instructor" class="level1">
<h1>Your Instructor</h1>
<p><strong>Dr.&nbsp;Sara Knox</strong></p>
<div class="columns">
<div class="column" style="width:30%;">
<p><img src="images/Knox-oval.png" class="img-fluid" style="width:85.0%"></p>
</div><div class="column" style="width:70%;">
<p><strong>Pronouns:</strong> She/Her/Hers</p>
<p><strong>Email:</strong> sara.knox@mcgill.ca</p>
<p><strong>Office Hours:</strong> Tuesdays 10:00-11:00 in BH 619. Alternative times available by appointment</p>
<p><strong>Bio:</strong> I am an Assistant Professor in the Department of Geography. Prior to that I was an Assistant Professor in the Department of Geography at UBC between Jan 2019 &amp; June 2023. I received my BSc in Earth System Science from McGill in 2009, and my PhD in Environmental Science from UC Berkeley in 2019. I am broadly interested in the impacts of climate variability and land-use change on land-atmosphere exchanges of water, energy, and trace gases. I also seek to understand how ecosystem responses to global change can feedback to slow or accelerate future climate change. My research and training is in micrometeorology, hydrology, and ecosystem ecology. I focus on biosphere-atmosphere interactions in a variety of climates and ecosystems.</p>
</div>
</div>
</section>
<section id="instructional-methods" class="level1">
<h1>Instructional methods</h1>
<p>The course consists of two 80 min lectures each week and one lab visits covering 32 topics, a midterm during the semester and a final during the exam period. Lectures will be held in-person.</p>
</section>
<section id="communication-guidelines" class="level1">
<h1>Communication Guidelines</h1>
<section id="announcements" class="level3">
<h3 class="anchored" data-anchor-id="announcements">Announcements</h3>
<p>New announcements will be posted regularly to keep you informed of logistics and any important course updates. Please make sure to check frequently.</p>
</section>
<section id="email" class="level3">
<h3 class="anchored" data-anchor-id="email">Email</h3>
<p>While I encourage you to post course content related questions in the Discussion Forums (see below), for private communication, use email. Please put the course ID {GEOG 321} on the subject line. <strong>Emails are typically answered within 24-36 hours during regular business hours (M-F 9am-5pm)</strong>. When addressing me in your email, you can refer to me as either Sara, Dr.&nbsp;Knox or Prof.&nbsp;Knox. Remember that email is a formal and public method of communication. Do not write anything that you do not want on the permanent, public record.</p>
</section>
<section id="course-logistics-q-a-forum" class="level3">
<h3 class="anchored" data-anchor-id="course-logistics-q-a-forum">Course Logistics Q &amp; A Forum</h3>
<p>Use this forum to ask logistical questions about the course or report any problems you encounter. Your classmates may have the same question. Students are encouraged to respond to questions and help each other!</p>
<p>The TAs and I will check this Forum every few days.</p>
</section>
<section id="other-discussion-forums" class="level3">
<h3 class="anchored" data-anchor-id="other-discussion-forums">Other Discussion Forums</h3>
<p>Discussion Forums are available for any questions related to assignments and study questions as well as the lecture material. As noted above, your classmates may have the same question. Students are encouraged to respond to questions and help each other!</p>
</section>
</section>
<section id="required-course-materials" class="level1">
<h1>Required course materials</h1>
<p>The readings are posted on the course website (https://geog321.github.io/). They consist of draft chapters from the textbook ‘Boundary Layer Climates’ by T. R. Oke and a few other sources.</p>
</section>
<section id="course-content" class="level1">
<h1>Course content</h1>
</section>
<section id="evaluation" class="level1">
<h1>Evaluation</h1>
<div class="columns">
<div class="column" style="width:30%;">
<table class="table">
<colgroup>
<col style="width: 34%">
<col style="width: 8%">
</colgroup>
<tbody>
<tr class="odd">
<td>Participation</td>
<td>5%</td>
</tr>
<tr class="even">
<td>Self-study questions</td>
<td>5%</td>
</tr>
<tr class="odd">
<td>Written assignments (4)</td>
<td>40%</td>
</tr>
<tr class="even">
<td>Mid-term exam</td>
<td>20%</td>
</tr>
<tr class="odd">
<td>Final exam</td>
<td>40%</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>As noted above, you will receive <strong>Participation</strong> marks for answering XXX questions during lectures. Note that you do not need to have the correct answer to receive full marks, you just need to submit an answer to all multiple-choice questions during the lecture. You are also strongly encouraged to engage in all discussion questions on XXX.</p>
<p><strong>Assignments</strong> will be handed on myCourses on the due date. All assignments are required to be labelled with course number, student number, student name and assignment number. Late assignments will be penalized 10% of the actual marks achieved for each (partial) day past 11:59 pm on the due date. Late assignments will not be accepted once graded assignments have been returned to the class (which results in a grade of 0%). Note that you are not required to use R (or other programming languages) for assignments, however, it is encouraged, and I will provide support and resources to help you with that (see Coding resources on the course website).</p>
<p><strong>Collaboration on homework is encouraged</strong>. However, you should think about the problems yourself before discussing them with others. <strong>Also, write-ups must be done independently</strong>. (In practice, this means that it is OK for other people to explain their solutions to you, but you must not be looking at other people’s solutions as you write your own.)</p>
<p><strong>Self-study questions</strong> are assigned regularly throughout the semester (10 in total). These are a great opportunity for you to apply some of the concepts covered in class and will help prepare you for assignments and exams. It is also a helpful way for you to <strong>learn R</strong> if that is of interest to you. Note that while solutions to the self-study questions are available to you, you are required to upload your own answers to these questions on myCourses (either as a word document, pdf, or html file). To help you keep up with the course material, you will have 3 days to upload your answers to myCourses (note that they are due at <strong>11:59pm PT on that day</strong>). <strong>You only need to complete 7/10 to receive full marks for the self-study questions (5% of your total grade)</strong>. All self-study questions and their due dates are already posted under Assignments.</p>
<p>The <strong>mid-term exam</strong> will be a closed-book, in-person exam on XXXX. More details on the mid-term exam can be found on the course website.</p>
<p>The <strong>final exam</strong> will be held during the final exam period. It will also be a closed-book, in-person exam. Additional details on the final exam will be posted on the course website.</p>
<p><strong>Note</strong>: Illness and extenuating circumstances can happen and may be legitimate reasons for extensions on assignments or postponement of exams. If there are reasons you are unable to meet a deadline be sure to discuss with me well in advance if possible. You must be prepared to provide confirmation of illness.</p>
</section>
<section id="academic-integrity" class="level1">
<h1>Academic integrity</h1>
<p>McGill University values academic integrity. Therefore, all students must understand the meaning and consequences of cheating, plagiarism and other academic offences under the <a href="chrome-extension://efaidnbmnnnibpcajpcglclefindmkaj/https://www.mcgill.ca/secretariat/files/secretariat/code_of_student_conduct_and_disciplinary_procedures.pdf">Code of Student Conduct and Disciplinary Procedures</a>” (Approved by Senate on 29 January 2003) (See <a href="https://www.mcgill.ca/students/srr/honest">McGill’s guide to academic honesty</a> for more information).</p>
</section>
<section id="other-statements" class="level1">
<h1>Other statements</h1>
<p>Please see the PDF of the course syllabus.</p>
</section>
<section id="strategies-for-success" class="level1">
<h1>Strategies for Success</h1>
<p><strong>Be proactive!</strong></p>
<ul>
<li>Keep track of deadlines &amp; note the late submission policies
<ul>
<li>Timely communication is important! If you have an issue, please bring it to my attention.</li>
<li>Partial credit is better than no credit. If you can’t finish a lab before the deadline - just submit what you’ve got done already.</li>
</ul></li>
<li>Drop by office hours &amp; ask questions!</li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>